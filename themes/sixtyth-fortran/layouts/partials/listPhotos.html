<h1>{{ partial "emojify.html" .Title }}</h1>
{{ .Content | safeHTML }}

<div class="dropdown-area">
  {{ partialCached "display-dropdown-FEC.html" . }}
  {{ partialCached "display-dropdown-manufacturer.html" . }}
  {{ partialCached "display-dropdown-movie.html" . }}
  {{ partialCached "display-dropdown-year.html" . }}
</div>

{{/* 1. Filter only pages in the "photos" section */}}
{{- $photosSection := where site.RegularPages "Section" "photos" -}}

{{/* 2. Further filter pages in that section that have GitInfo */}}
{{- $photosWithGit := where $photosSection "GitInfo" "ne" nil -}}

{{/* 3. Sort by Git last author date (or commit date) descending */}}
{{- $sorted := sort $photosWithGit "GitInfo.AuthorDate" "desc" -}}

{{/* 4. Paginate sorted list, e.g., 50 per page */}}
{{- $paginator := .Paginate $sorted 50 -}}

<div class="gallery">
  <div id="tagsContainer" style="
      display: flex;
      flex-wrap: wrap;
      align-items: stretch;
      justify-content: space-around;
    ">
    {{- range $paginator.Pages -}}
      <div class="{{ delimit (apply .Params.categories "urlize" ".") " " }} {{ partial "date-to-year.html" .Params.startDate }}" style="display: none;">
        <div class="gallery-image-box">
          {{ partial "filename-to-photo.html" .Title }}
        </div>
      </div>
    {{- end -}}
  </div>
</div>

{{/* 5. Pagination UI */}}
<div class="pagination">
  {{ template "_internal/pagination.html" . }}
</div>

{{ partialCached "display-dropdown-script.html" . }}
