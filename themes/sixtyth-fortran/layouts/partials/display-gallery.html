{{- /*
  layouts/partials/display-gallery.html
  Reads prebuilt data at site.Data.photos-by-page and renders photos for the current page title.
  Safe fallback to empty slice when data missing.
*/ -}}

{{- $data := index site.Data "photos-by-page" -}}
{{- if not $data -}}
  {{- /* No prebuilt data available â€” nothing to render */ -}}
  {{- return -}}
{{- end -}}

{{- $currentTitle := .Title | default "" -}}
{{- $photos := index $data $currentTitle | default (slice) -}}

{{- if gt (len $photos) 0 -}}
  <div class="gallery">
    {{- range $i, $p := $photos -}}
      <div class="gallery-image-box">
        {{- /* call your DisplayPhoto partial with the photo name. Use a deterministic cache key */ -}}
        {{- $name := index $p "name" | default "" -}}
        {{- partialCached "DisplayPhoto.html" (dict "name" $name "mode" "default") (printf "DisplayPhoto|%s|default" $name) -}}
        
      </div>
    {{- end -}}
  </div>
{{- else -}}
  {{- /* If you want to show nothing when no photos exist, leave empty.
       Or uncomment the line below to display a message: */ -}}
  {{- /* <p>No gallery images.</p> */ -}}
{{- end -}}
