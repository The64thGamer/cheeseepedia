<h1>{{ partial "emojify.html" .Title }}</h1>
{{ .Content | safeHTML }}

<div class="dropdown-area">
  {{ partialCached "display-dropdown-FEC.html" . }}
  {{ partialCached "display-dropdown-manufacturer.html" . }}
  {{ partialCached "display-dropdown-movie.html" . }}
  {{ partialCached "display-dropdown-year.html" . }}
</div>

{{/* 1. Filter to only pages in the "videos" section */}}
{{- $videosSection := where site.RegularPages "Section" "videos" -}}

{{/* 2. Filter only those that have GitInfo */}}
{{- $videosWithGit := where $videosSection "GitInfo" "ne" nil -}}

{{/* 3. Sort by Git modification / author date, descending */}}
{{- $sortedVideos := sort $videosWithGit "GitInfo.AuthorDate" "desc" -}}

{{/* 4. Paginate the sorted list, e.g., 50 per page */}}
{{- $paginator := .Paginate $sortedVideos 50 -}}

<div id="loadingText" class="loading-text">Loading. . .</div>

<div id="tagsContainer" style="visibility:hidden;">
  {{- range $paginator.Pages -}}
    <div class="{{ delimit (apply .Params.categories "urlize" ".") " " }} {{ partial "date-to-year.html" .Params.startDate }}" style="display: none;">
      {{ partial "display-video-box.html" . }}
    </div>
  {{- end -}}
</div>

{{/* 5. Pagination UI */}}
<div class="pagination">
  {{ template "_internal/pagination.html" . }}
</div>

{{ partialCached "display-dropdown-script.html" . }}
