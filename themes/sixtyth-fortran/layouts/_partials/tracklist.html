<h2>Tracklist</h2>
<ol class="segments">
  {{ range .Params.segments }}
  <li class="segment">
    <div class="segment-title">{{ .title }}</div>
    <ol class="segment-items">
      {{ range .items }}
      {{ if eq .type "song" }}
      {{/* parse start as timecode */}}
      {{ $tc := .start | default "0" }}
      {{ $parts := split $tc ":" }}
      {{ $len := len $parts }}
      {{ $seconds := 0 }}
      {{ if eq $len 3 }}
      {{ $seconds = (index $parts 0 | int | mul 3600) | add ((index $parts 1 | int | mul 60) | add (index $parts 2 |
      int)) }}
      {{ else if eq $len 2 }}
      {{ $seconds = (index $parts 0 | int | mul 60) | add (index $parts 1 | int) }}
      {{ else if eq $len 1 }}
      {{ $seconds = index $parts 0 | int }}
      {{ end }}
      {{ $min := div $seconds 60 }}
      {{ $sec := mod $seconds 60 }}

      <li class="track" data-start="{{ $tc }}" data-src="{{ .src }}">
        <span class="track-title">{{ .title }}</span>
        <span class="track-time">{{ printf "%02d:%02d" $min $sec }}</span>
      </li>

      {{ else if eq .type "medley" }}
      <li class="medley">
        <div class="medley-title">{{ .title }}</div>
        <ol class="medley-tracks">
          {{ range .tracks }}
          {{ $tc := .start | default "0" }}
          {{ $parts := split $tc ":" }}
          {{ $len := len $parts }}
          {{ $seconds := 0 }}
          {{ if eq $len 3 }}
          {{ $seconds = (index $parts 0 | int | mul 3600) | add ((index $parts 1 | int | mul 60) | add (index $parts 2 |
          int)) }}
          {{ else if eq $len 2 }}
          {{ $seconds = (index $parts 0 | int | mul 60) | add (index $parts 1 | int) }}
          {{ else if eq $len 1 }}
          {{ $seconds = index $parts 0 | int }}
          {{ end }}
          {{ $min := div $seconds 60 }}
          {{ $sec := mod $seconds 60 }}

          <li class="track" data-start="{{ $tc }}" data-src="{{ .src }}">
            <span class="track-title">{{ .title }}</span>
            <span class="track-time">{{ printf "%02d:%02d" $min $sec }}</span>
          </li>
          {{ end }}
        </ol>
      </li>
      {{ end }}
      {{ end }}
    </ol>
  </li>
  {{ end }}
</ol>